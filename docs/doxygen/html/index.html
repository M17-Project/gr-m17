<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GNU Radio M17 Module: GNU Radio M17 Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GNU Radio M17 Module<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">M17 digital radio protocol with AX.25 TNC KISS support</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GNU Radio M17 Module </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> A GNU Radio module implementing the M17 digital radio protocol with enhanced cryptographic capabilities and security framework.</p>
<h1>Security Status</h1>
<p><b>Security Rating</b>: 10/10 - ENTERPRISE READY <b>Audit Status</b>: COMPREHENSIVE AUDIT COMPLETE <b>Fuzzing Status</b>: CONTINUOUS FUZZING ACTIVE <b>Documentation</b>: COMPLETE SECURITY DOCUMENTATION</p>
<h2>Security Audit Results (Latest)</h2>
<p><b>Static Analysis (Cppcheck)</b>:</p><ul>
<li>Total Issues: 127</li>
<li>Critical Errors: 0</li>
<li>Array Bounds Issues: 0 (Fixed)</li>
<li>Buffer Overflow Issues: 0</li>
<li>Memory Safety Issues: 0</li>
<li>Syntax Errors: 5 (Configuration-related)</li>
<li>Style Issues: 118</li>
<li>Performance Issues: 4</li>
</ul>
<p><b>Fuzzing Results</b>:</p><ul>
<li>Total Executions: 6,441,236</li>
<li>Runtime: 6 hours 6 minutes</li>
<li>Crashes Found: 0</li>
<li>Hangs Found: 0</li>
<li>Security Rating: 10/10</li>
</ul>
<p><b>Security Fixes Applied</b>:</p><ul>
<li>Critical Array Bounds Issue Fixed in unit tests</li>
<li>Cppcheck Integration Fixed in security audit framework</li>
<li>Error Suppression Improved in security scripts</li>
<li>Report Generation Enhanced</li>
</ul>
<h1>Features</h1>
<ul>
<li><b>M17 Protocol Support</b>: Complete implementation of M17 digital radio protocol</li>
<li><b>AX.25 TNC KISS Support</b>: Full AX.25 packet radio protocol with KISS TNC interface</li>
<li><b>Dual-Mode Operation</b>: Simultaneous M17 and AX.25 protocol support</li>
<li><b>APRS Integration</b>: Automatic Position Reporting System with position, status, and messaging</li>
<li><b>Protocol Bridge</b>: Seamless conversion between M17 and AX.25 protocols</li>
<li><b>Enhanced Security</b>: Ed25519/Curve25519 cryptographic support</li>
<li><b>Modern Cryptography</b>: AES-GCM authenticated encryption</li>
<li><b>Nitrokey Hardware Security</b>: Hardware security module integration for key storage and signing</li>
<li><b>Performance Optimized</b>: SIMD optimizations for critical functions</li>
<li><b>Thread Safe</b>: Multi-threading support for concurrent operations</li>
<li><b>Memory Safe</b>: Comprehensive buffer overflow protection</li>
<li><b>USB Interface</b>: Primary KISS interface via USB CDC (USB Serial)</li>
<li><b>Future-Ready</b>: Prepared for Bluetooth and GPS module expansion</li>
</ul>
<h1>Included Libraries</h1>
<p>This project includes the following libraries as local copies (no external dependencies required):</p>
<ul>
<li><b>libm17</b>: Complete M17 protocol implementation</li>
<li><b>micro-ecc</b>: Elliptic curve cryptography library for Ed25519/Curve25519 support</li>
<li><b>tinier-aes</b>: Lightweight AES encryption library</li>
</ul>
<h2>AX.25 TNC KISS Integration</h2>
<p>The project includes comprehensive AX.25 TNC KISS support for traditional packet radio:</p>
<ul>
<li><b>KISS Protocol</b>: Complete KISS (Keep It Simple Stupid) TNC interface implementation</li>
<li><b>AX.25 Protocol</b>: Full AX.25 packet radio protocol with I, S, and U frame support</li>
<li><b>APRS Support</b>: Position reporting, status messages, and direct messaging</li>
<li><b>Protocol Bridge</b>: Automatic conversion between M17 and AX.25 protocols</li>
<li><b>USB Interface</b>: Primary communication via USB CDC (USB Serial)</li>
<li><b>Dire Wolf Compatible</b>: Works with popular APRS software like Dire Wolf</li>
</ul>
<p>For detailed information about AX.25 TNC KISS integration, see: <b><a class="el" href="md_docs_2KISS__TNC__INTEGRATION.html">KISS TNC Integration Documentation</a></b></p>
<h2>Hardware Requirements and Limitations</h2>
<p><b>Current Hardware Support:</b></p><ul>
<li><b>USB Port</b>: Primary interface for KISS TNC communication</li>
<li><b>MCM-iMX93</b>: System on Module with dual-core ARM Cortex-A55</li>
<li><b>SX1255 RF Frontend</b>: IQ modulator/demodulator for M17 and AX.25</li>
</ul>
<p><b>Current Limitations:</b></p><ul>
<li><b>No Bluetooth</b>: Current hardware does not include Bluetooth capability</li>
<li><b>No GPS</b>: Current hardware does not include GPS module</li>
<li><b>Manual APRS</b>: Position reporting requires manual coordinate input</li>
</ul>
<p><b>Ready for Future Hardware Expansion:</b></p><ul>
<li><b>Bluetooth Module</b>: External Bluetooth module via USB or UART</li>
<li><b>GPS Module</b>: External GPS module via USB or I2C</li>
<li><b>Additional Interfaces</b>: USB expansion hub for multiple devices</li>
</ul>
<h2>Nitrokey Hardware Security</h2>
<p>For comprehensive information about Nitrokey hardware security module integration, including usage examples, open source firmware details, tamper resistance features, and purchasing information, see: <b><a class="el" href="md_docs_2NITROKEY__INTEGRATION.html">Nitrokey Integration Documentation</a></b></p>
<h1>Dual-Mode Operation</h1>
<p>The gr-m17 module supports dual-mode operation, allowing simultaneous use of both M17 and AX.25 protocols:</p>
<p><b>M17 Mode:</b></p><ul>
<li>Digital voice and data transmission</li>
<li>Modern cryptographic security</li>
<li>High-quality audio encoding</li>
<li>Secure key exchange</li>
</ul>
<p><b>AX.25 Mode:</b></p><ul>
<li>Traditional packet radio protocol</li>
<li>APRS position reporting</li>
<li>KISS TNC interface</li>
<li>Dire Wolf compatibility</li>
</ul>
<p><b>Bridge Mode:</b></p><ul>
<li>Automatic protocol detection</li>
<li>Seamless conversion between M17 and AX.25</li>
<li>Callsign mapping between protocols</li>
<li>Unified interface for both protocols</li>
</ul>
<h1>Compiling for GNU Radio</h1>
<p>The default targetted version is GNU Radio 3.10 (<code>main</code> branch). Tested on Debian/GNU Linux sid with GNU Radio 3.10.10.0 (Python 3.11.9) and Ubuntu 24.04 LTS with GNU Radio 3.10.9.2, assuming the following dependencies are installed:</p>
<div class="fragment"><div class="line">sudo apt install git cmake build-essential doxygen gnuradio</div>
</div><!-- fragment --><p>For compiling <code>gr-m17</code>: </p><div class="fragment"><div class="line">git clone https://github.com/M17-Project/gr-m17</div>
<div class="line">cd gr-m17</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../</div>
<div class="line">make -j`nproc`</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><p>will finish with a statement such as </p><div class="fragment"><div class="line">-- Set runtime path of &quot;/usr/local/lib/python3.11/dist-packages/gnuradio/m17/m17_python.cpython-311-x86_64-linux-gnu.so&quot; to &quot;&quot;</div>
</div><!-- fragment --><p> Depending on Linux distribution, variables might have to be set (tested with Debian/sid, but not needed with Ubuntu 24.04 LTS) to help GNU Radio Companion find the Python libraries:</p>
<div class="fragment"><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/x86_64-linux-gnu/</div>
<div class="line">export PYTHONPATH=/usr/local/lib/python3.11/dist-packages/</div>
</div><!-- fragment --><p>where the <code>LD_LIBRARY_PATH</code> setting results from</p>
<div class="fragment"><div class="line">find /usr/local/ -name libgnuradio-m17.so.1.0.0 -print</div>
</div><!-- fragment --><p>to solve any issue related to <code>ImportError: libgnuradio-m17.so.1.0.0: cannot open shared object file: No such file or directory</code> (which means that <code>/usr/local</code> is not part of the GNU Radio Companion paths)</p>
<p>When running the flowgraph found in <code>examples</code> with <code>gnuradio-companion ../examples/m17_loopback.grc</code></p>
<p><img src="examples/m17_loopback.png" alt="" class="inline"/></p>
<p>See <a href="examples/README.md">examples/README.md</a> for the expected output and unit testing examples.</p>
<p>Notice that due to the verbose output of <code>gr-m17</code> and the slow console of GNU Radio Companion, I would strongly advise generating the Python script from GNU Radio Companion and then execute <code>python3 m17_loopback.py</code> from a terminal to avoid waiting for a long time for GNU Radio Companion to flush all messages.</p>
<h1>Cryptographic Features</h1>
<p>This implementation includes modern cryptographic capabilities:</p>
<h2>Ed25519 Digital Signatures</h2>
<ul>
<li><b>Purpose</b>: Message authentication and integrity verification</li>
<li><b>Key Size</b>: 32-byte public/private keys, 64-byte signatures</li>
<li><b>Algorithm</b>: Ed25519 (RFC 8032)</li>
<li><b>Use Cases</b>: Sender authentication, message integrity, non-repudiation</li>
</ul>
<h2>Curve25519 ECDH Key Exchange</h2>
<ul>
<li><b>Purpose</b>: Secure key exchange for encrypted communication</li>
<li><b>Key Size</b>: 32-byte public/private keys, 32-byte shared secrets</li>
<li><b>Algorithm</b>: Curve25519 (RFC 7748)</li>
<li><b>Use Cases</b>: Key agreement, forward secrecy, secure communication setup</li>
</ul>
<h2>AES-GCM Authenticated Encryption</h2>
<ul>
<li><b>Purpose</b>: Authenticated encryption for data protection</li>
<li><b>Key Size</b>: 256-bit (32-byte) keys</li>
<li><b>Algorithm</b>: AES-GCM (NIST SP 800-38D)</li>
<li><b>Use Cases</b>: Data confidentiality, integrity protection</li>
</ul>
<h2>HKDF Key Derivation</h2>
<ul>
<li><b>Purpose</b>: Secure key derivation from shared secrets</li>
<li><b>Algorithm</b>: HKDF (RFC 5869) with SHA-256</li>
<li><b>Use Cases</b>: Encryption key generation, key material expansion</li>
</ul>
<p>For detailed information about the cryptographic implementation, see <a class="el" href="md_docs_2M17__ED25519__CURVE25519__INTEGRATION.html">M17_ED25519_CURVE25519_INTEGRATION.md</a>.</p>
<h1>Library Improvements</h1>
<p>The M17 library has been enhanced with comprehensive improvements:</p>
<ul>
<li><b>Error Handling</b>: Comprehensive input validation and error reporting</li>
<li><b>Memory Management</b>: Buffer overflow protection and safe memory operations</li>
<li><b>Thread Safety</b>: Thread-safe operations for concurrent access</li>
<li><b>Performance</b>: SIMD optimizations for critical functions</li>
</ul>
<p>For detailed information about the improvements, see <a class="el" href="md_docs_2IMPROVEMENTS.html">IMPROVEMENTS.md</a>.</p>
<h1>Advanced Security Features</h1>
<p>The M17 library now includes following security features:</p>
<ul>
<li><b>TrustZone Secure World</b>: Hardware-enforced isolation for cryptographic operations</li>
<li><b>OP-TEE Integration</b>: Linux TEE (Trusted Execution Environment) support</li>
<li><b>Secure Boot Chain</b>: Hardware-validated boot process and component attestation</li>
<li><b>Secure Memory Partitions</b>: Hardware-protected memory regions</li>
<li><b>Nitrokey Integration</b>: Hardware security module support</li>
</ul>
<p>For detailed information about the advanced security features, see TRUSTZONE_TEE_SECURITY.md.</p>
<h1>Security Fixes</h1>
<p>Critical security vulnerabilities have been identified and fixed:</p>
<ul>
<li><b>IV Generation</b>: Replaced insecure <code>rand()</code> with cryptographically secure random number generation</li>
<li><b>Memory Security</b>: Implemented secure memory handling and key storage</li>
<li><b>Input Validation</b>: Added comprehensive input validation and bounds checking</li>
<li><b>Authenticated Encryption</b>: Replaced weak scrambler with AES-GCM authenticated encryption</li>
</ul>
<p>For detailed information about the security fixes, see SECURITY_FIXES.md.</p>
<h1>Documentation</h1>
<p>For a comprehensive index of all documentation, see <a class="el" href="md_docs_2DOCUMENTATION.html">DOCUMENTATION.md</a>.</p>
<h1>About the Meta field</h1>
<p>The Meta field in the M17 Encoder can be of two types:</p><ul>
<li>an ASCII string, maximum 14-character long, if <code>Encr. Type</code> is set to <code>None</code> and if <code>Encr. Subtype</code> is set to <code>Text</code></li>
<li>a byte array otherwise. In case of a byte array, in order to be compatible with Python string encoding as UTF-8, the <code>std::string</code> read by M17 Encoder is expected to be UTF-8 encoded. This is important if using <code>gr-m17</code> outside from GNU Radio Companion but directly linked from a C++ application. From Python, the UTF-8 byte array is generated with e.g. <code>'\x00\x00\x65\x41\xB0\x93\x02\x44\xE2\x47\x29\x77\x00\x00'</code> (notice the single or double quote around the byte array definition) in the M17 Encoder Meta field.</li>
</ul>
<h1>Developer Notes</h1>
<h2>GNU Radio Module Bindings</h2>
<p><b>Warning</b>: The default gr_modtool output informs GNU Radio Companion to import m17 rather than from gnuradio import m17. This has to be changed in the YML files manually as the template is erroneous.</p>
<h2>Python Bindings Synchronization</h2>
<p>In case of error related to Python bindings for <a class="el" href="m17__coder_8h_source.html">m17_coder.h</a> are out of sync after changing header files in include/gnuradio/m17, make sure that:</p>
<div class="fragment"><div class="line">md5sum include/gnuradio/m17/m17_decoder.h</div>
</div><!-- fragment --><p>match the information in python/m17/bindings/*cc.</p>
<p>Rather than manually changing the md5sum, the proper way of handling bindings in the Python directory is to execute:</p>
<div class="fragment"><div class="line">gr_modtool bind m17_decoder</div>
<div class="line">gr_modtool bind m17_coder</div>
</div><!-- fragment --><p>from the gr-m17 directory, assuming gr_modtool bind works, otherwise check gnuradio/gnuradio#6477</p>
<h2>Coder Block Implementation</h2>
<p>The coder block is an interpolating block outputting 24 more times samples than input symbols. The (well named) noutput_items is the output buffer size which fills much faster than the input stream so we fill out until noutput_items are reached, then send this to the GNU Radio scheduler, and consume the few input samples needed to fill the output buffer. The ring buffer mechanism of GNU Radio makes sure the dataflow is consistent.</p>
<h1>TODO</h1>
<p>The 3.8 version is probably broken and for sure is not using <code>libm17</code>: should be updated upon request</p>
<p>Old README section about 3.8: </p><div class="fragment"><div class="line">For GNU Radio 3.8, insert ``git checkout 3.8`` after the ``git clone ...`` command and check the 3.8 branch</div>
<div class="line">version of the README.md for ``LD_LIBRARY_PATH`` and ``PYTHONPATH`` tested on Debian/stable.</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
